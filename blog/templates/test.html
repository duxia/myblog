{% extends "blog_base.html" %}

{% block blogcontent %}
<script src="/static/zeroclipboard/ZeroClipboard.js"></script>

<button id="copy-button" data-clipboard-target="fe_text" title="Click to copy me.">Copy to Clipboard</button>
<script type="text/javascript">
$(document).ready(function(){
  $("pre").each(function(){
  	var b = '<div class="zero-clipboard"><span class="btn-clipboard">复制</span></div>';
    $(this).before(b);
  });
  init();
});

function init(){
	ZeroClipboard.config({
  		hoverClass: "btn-clipboard-hover"
	});
	var client = new ZeroClipboard( $(".btn-clipboard") );
	
	client.on("ready",function(readyEvent){
		//alert("ZeroClipboard SWF is ready!");
		
		globalenv = $("#global-zeroclipboard-html-bridge");
		globalenv.data("placement", "top").attr("title", "复制到剪贴板").tooltip()//设置工具栏提示框
		console.log(globalenv.data("placement", "top"));
		//copy响应
		client.on("copy",function(event){
			console.log(event);
			var c = $(this).parent();//.nextAll("pre").first();
			console.log($(event.target).parent().nextAll("pre").first().text());
			var text = $(event.target).parent().next("pre").text();
			console.log(c);
			console.log(this);//this指向当前的zeroclip对象
			console.log($(this));
			event.clipboardData.setData("text/plain", text);
			//this.setText(text);均可
		});
		//copy完成后响应
		client.on("aftercopy", function() {
            globalenv.attr("title", "复制完成!").tooltip("fixTitle").tooltip("show").attr("title", "复制到剪贴板").tooltip("fixTitle");
        });
        //加载出错
        client.on("error",function() {
        	globalenv.attr("title", "您的浏览器需要安装 Flash 插件").tooltip("fixTitle").tooltip("show");
        });
	});
	
}
</script>

<pre>
#include 'stdio.h'

void main()
{
	printf("hello world");
}
</pre>
<hr>
<pre>
#include 'stdio.h'

void main()
{
	printf("asdfasdf");
}
</pre>

{{ verifyform.captcha }}
{% endblock %}